<!DOCTYPE html >
<html lang="en" xmlns:th="http://www.thymeleaf.org"; >
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,
          initial-scale=1.0,
          maximum-scale=1.0,
          user-scalable=no">
    <title>主页</title>
    <script th:src="@{js/jquery.min.js}"></script>
    <script th:src="@{framework/Highcharts/code/highcharts.js}"></script>
    <script th:src="@{framework/Highcharts/code/modules/exporting.js}"></script>
    <script th:src="@{framework/Highcharts/code/modules/export-data.js}"></script>
    <link th:href="@{layui/css/layui.css}" rel="stylesheet"/>
    <script th:src="@{layui/layui.js}"></script>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

    </style>

</head>

<body>
<div id="box" style="height:600px;width: 600px;background-color: grey;position: absolute; margin-top:30px;">
    <div id="container_first" style="width:296px;height:296px;position: relative;float: left ;margin: 2px"></div>
    <div id="container_second" style="width:296px;height:296px;position: relative;float: left ;margin: 2px"></div>
    <div id="container_third" style="width:296px;height:296px;position: relative;float: left ;margin: 2px"></div>
    <div id="container_forth" style="width:296px;height:296px;position: relative;float: left ;margin: 2px"></div>
</div>
</body>

<script>


    $(document).ready(function () {

        //表1 七大区-租价表
        $.ajax({
            type: "POST",
            url: "/dataController/Drent",
            success: function (msg) {
                var data = [];
                for (i = 0; i < msg.length; i++) {
                    var newData = {name: ' ', y: 11.84};
                    newData.name = msg[i].districtName;
                    newData.y = msg[i].districtRentprice;
                    data.push(newData)

                }
                <!--城区 平均租价-->
                Highcharts.chart('container_first', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: '租房价格排行'
                    },
                    subtitle: {
                        text: 'RentPrice'
                    },
                    xAxis: {
                        type: 'category'
                    },
                    yAxis: {
                        title: {
                            text: '房价（元/月）'
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            dataLabels: {
                                enabled: true,
                                format: '{point.y}'
                            }
                        }
                    },

                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y}</b> of total<br/>'
                    },

                    series: [
                        {
                            name: "TOP10",
                            colorByPoint: true,
                            data: data
                        }
                    ]
                });
                data = [];
                console.log(msg);
                for (i = 0; i < msg.length; i++) {
                    newData = {name: ' ', y: 11.84};
                    newData.name = msg[i].districtName;
                    newData.y = msg[i].districtRentnum;
                    data.push(newData)

                }
                Highcharts.chart('container_second', {
                    chart: {
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false,
                        type: 'pie'
                    },
                    title: {
                        text: '租数份额'
                    },
                    tooltip: {
                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                style: {
                                    color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                }
                            }
                        }
                    },
                    series: [{
                        name: 'Brands',
                        colorByPoint: true,
                        data: data
                    }]
                })
            }
        });

        //表3 七大区-买价表
        $.ajax({
            type: "POST",
            url: "/dataController/Dsold",
            success: function (msg) {
                var data = [];
                for (i = 0; i < msg.length; i++) {
                    var newData = {name: ' ', y: 11.84};
                    newData.name = msg[i].districtName;
                    newData.y = msg[i].districtSoldprice;
                    data.push(newData)

                }
                <!--城区 平均租价-->
                Highcharts.chart('container_third', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: '买房价格排行'
                    },
                    subtitle: {
                        text: 'SoldPrice'
                    },
                    xAxis: {
                        type: 'category'
                    },
                    yAxis: {
                        title: {
                            text: '房价（元/㎡）'
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            dataLabels: {
                                enabled: true,
                                format: '{point.y}'
                            }
                        }
                    },

                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y}</b> of total<br/>'
                    },

                    series: [
                        {
                            name: "TOP10",
                            colorByPoint: true,
                            data: data
                        }
                    ]
                });
                data = [];
                console.log(msg);
                for (i = 0; i < msg.length; i++) {
                    newData = {name: ' ', y: 11.84};
                    newData.name = msg[i].districtName;
                    newData.y = msg[i].districtSoldnum;
                    data.push(newData)

                }
                Highcharts.chart('container_forth', {
                    chart: {
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false,
                        type: 'pie'
                    },
                    title: {
                        text: '售数份额'
                    },
                    tooltip: {
                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                style: {
                                    color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                }
                            }
                        }
                    },
                    series: [{
                        name: 'Brands',
                        colorByPoint: true,
                        data: data
                    }]
                })
            }
        });




    });//documet.readyfunction


</script>


</html>
